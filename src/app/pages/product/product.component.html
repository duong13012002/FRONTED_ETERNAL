<div class="row">

  <form novalidate (ngSubmit)="onSubmitSearch()" [formGroup]="formSearch">
    <!--      <ng-template #content1 let-modal>-->
    <div class="row">
      <h2 class="container-fluid text-center lead fw-normal" style="color: #3c763d; font-size: 30px; font-family: 'Times New Roman', Times, serif;">Tìm kiếm sản phẩm</h2>
      <!--          <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>-->
    </div>
    <div class="row">

      <div class="row ml-3">
        <div class="col-3">
          <input class="form-control" type="text" formControlName="name" placeholder="Nhập tên sản phẩm"
            style="border: solid 1px gray;height: 42px; width: 300px; margin-left: 35px;">
        </div>
        <div class="col-3">
          <input class="form-control " type="text" formControlName="outputprice" placeholder="Nhập giá sản phẩm"
            style="border: solid 1px gray;height: 42px;">
        </div>
        <div class="col-3">
          <select *ngIf="dataCate" class="form-control" formControlName="category" style="border: solid 1px gray;height: 42px;">
            <option value="">Nhập danh mục</option>
            <option *ngFor="let item of dataCate" [value]="item.id">{{item.name}}
            </option>

          </select>
        </div>
        <div class="col-3">
          <select *ngIf="dataBrand" class="form-control " formControlName="hang" style="border: solid 1px gray;width: 330px; height: 42px;">
            <option value="">Nhập hãng</option>
            <option *ngFor="let item of dataBrand" [value]="item.id">{{item.name}}
            </option>

          </select>
        </div>

      </div>
    </div>

    <div class="row ml-3 mt-3 mb-2 me-3" style="float: right;">
      <div>
        <button type="button" class="btn btn-success me-2" type="submit"> Tìm kiếm</button>
      </div>
    </div>
    <!--      </ng-template>-->

  </form>

</div>

<div class="row justify-content-center m-2 mt-3 ms-5">
  <div class="col-lg-2 col-md-6 product" style="padding-left: 10px;margin-left: 10px;" *ngFor="let data of productList">
    <div class="single-product card">
      <img class="img-fluid img" src="/assets/img/product/p3.jpg" alt="">
      <div class="product-details">
        <h1 class="text-center product-name">{{data.name}}</h1>
        <p class="cate-brand">Loại: {{data!.category!.name}}</p>
        <p class="cate-brand">Hãng: {{data!.hang!.name}}</p>
        <div class="price">
          <h5 class="text-danger">{{data.outputprice}} VND</h5>
        </div>
          <div class="prd-bottom card-footer">
            <a class="social-info" (click)="choiseProduct(data,content)">
              <span class="ti-bag"></span>
              <p class="hover-text">Add to Cart</p>
            </a>
            <a href="" class="social-info">
              <span class="lnr lnr-heart"></span>
              <p class="hover-text">Wishlist</p>
            </a>
          </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="Page" class='row justify-start justify-content-sm-end' style="float: right;">
  <div style="display: flex;">
    <select #selectSize (change)="pageItem(selectSize.value)" class="page-items mr-1"
      style='height: 30px;margin-top: 17px;'>
      <option selected>5</option>
      <option>10</option>
      <option>15</option>
      <option>20</option>
    </select>
    <p class='mt-3 mr-3'>dòng/trang. Tổng số {{Page["totalElements"]}}. Hiển thị {{this.size * this.indexPage + 1}}
      -{{countStt()}}. </p>
    <nav aria-label="Page navigation example" class="mb-2">
      <ul class="pagination mr-sm-3">

        <!--  to start-->
        <li style="border-color: white">
          <a [ngClass]="indexPage == 0?'dis-a':''" (click)="preNextPage('start')">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="font-size: 20px" fill="currentColor"
              class="bi bi-chevron-double-left" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
              <path fill-rule="evenodd"
                d="M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
            </svg>
          </a>
        </li>

        <!--   to pre -->
        <li style="border-color: white" class="mr-3 ">
          <a [ngClass]="indexPage == 0?'dis-a':''" (click)="preNextPage('pre')">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
              class="bi bi-chevron-left" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
            </svg>
          </a>
        </li>

        <!--   to next -->
        <li>
          <a [ngClass]="(Page['totalPages'] - 1) == indexPage?'dis-a':''" (click)="preNextPage('next')">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
              class="bi bi-chevron-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </a>
        </li>

        <!--   to end -->
        <li style="border-color:  white">
          <a [ngClass]="(Page['totalPages'] - 1) == indexPage?'dis-a':''" (click)="preNextPage('end')">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" font-weight="bold" height="20" fill="currentColor"
              class="bi bi-chevron-double-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z" />
              <path fill-rule="evenodd"
                d="M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </a>
        </li>
      </ul>
    </nav>
  </div>

</div>

<form novalidate [formGroup]="formAdd">
  <ng-template #content let-modal>
    <div class="modal-header">
      <h2 class="container-fluid text-center lead fw-normal" style="color: #3c763d">Chọn mẫu mã bạn muốn mua</h2>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col-8 offset-2f">

          <div class="form-group row">
            <label class="col-md-2 col-form-label">Size: </label>
            <div class="col-md-10 mt-2">
              <div>
                <select #selectSize (change)="changeSC(selectSize.value,selectColor.value)" class="form-control"
                  formControlName="size">
                  <option *ngFor="let item of dataSize" [value]="item.id">{{item.value}}
                  </option>

                </select>

                <small class="col alert text-danger" role="alert"
                  *ngIf="formAdd.get('size')?.errors?.required && formAdd.get('size')?.touched">
                  Size chưa được chọn !
                </small>
              </div>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-md-2 col-form-label">Màu: </label>
            <div class="col-md-10 mt-2">
              <div>
                <select #selectColor (change)="changeSC(selectSize.value,selectColor.value)" class="form-control"
                  formControlName="mau">
                  <option *ngFor="let item of dataColor" [value]="item.id">{{item.name}}
                  </option>

                </select>

                <small class="col alert text-danger" role="alert"
                  *ngIf="formAdd.get('mau')?.errors?.required && formAdd.get('mau')?.touched">
                  Màu chưa được chọn !
                </small>
              </div>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-md-2 col-form-label">Số lượng: </label>
            <div class="col-md-10 mt-2">
              <input #selectquantity (change)="checkChange(selectquantity.value)" class="form-control" type="text"
                formControlName="quantity">
              <small class="col alert text-danger" role="alert"
                *ngIf="formAdd.get('quantity')?.errors?.required && formAdd.get('quantity')?.touched">
                Số lượng không được để trống !
              </small>
              <small class="col alert text-danger" role="alert"
                *ngIf="formAdd.get('quantity')?.errors?.pattern && formAdd.get('quantity')?.touched">
                Định dạng số lượng chưa đúng !
              </small>
            </div>
          </div>

          <h6 *ngIf="message != null" class="col alert text-danger mt-3" role="alert"> {{message }} sản phẩm có sẵn
          </h6>

        </div>
      </div>
      <div class="modal-footer">
        <div>
          <button type="button" class="btn btn-success" type="submit" (click)="checklogin()"
            [disabled]="(!formAdd.valid || !checkChange(selectquantity.value))">Thêm vào giỏ hàng</button>
        </div>
      </div>
    </div>
  </ng-template>
</form>
